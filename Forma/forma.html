<!DOCTYPE html>
<html lang="en">
<head><meta charset="gb18030">

  <title>Cotizador Mayoreo Covita</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css'>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500'>
  <link rel="stylesheet" href="./css/forma.css">

</head>

<body>
  <!-- partial:index.partial.html -->
  <section class="form-box">
    <div class="container">

      <div class="row">
        <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 form-wizard">

          <!-- Form Wizard -->
          <form role="form" action="" method="post">

            <h3>Cotizador Covita</h3>
            <p>Llena todos los campos para continuar</p>

            <!-- Form progress -->
            <div class="form-wizard-steps form-wizard-tolal-steps-4">
              <div class="form-wizard-progress">
                <div class="form-wizard-progress-line" data-now-value="12.25" data-number-of-steps="4" style="width: 12.25%;"></div>
              </div>
              <!-- Step 1 -->
              <div class="form-wizard-step active">
                <div class="form-wizard-step-icon"><i class="fa fa-user" aria-hidden="true"></i></div>
                <p>Personal</p>
              </div>
              <!-- Step 1 -->

              <!-- Step 2 -->
              <div class="form-wizard-step">
                <div class="form-wizard-step-icon"><i class="fa fa-location-arrow" aria-hidden="true"></i></div>
                <p>Productos</p>
              </div>
              <!-- Step 2 -->

              <!-- Step 3 -->
              <div class="form-wizard-step">
                <div class="form-wizard-step-icon"><i class="fa fa-briefcase" aria-hidden="true"></i></div>
                <p>Pedido</p>
              </div>
              <!-- Step 3 -->

              <!-- Step 4 -->
              <div class="form-wizard-step">
                <div class="form-wizard-step-icon"><i class="fa fa-money" aria-hidden="true"></i></div>
                <p>Adicional</p>
              </div>
              <!-- Step 4 -->
            </div>
            <!-- Form progress -->


            <!-- Form Step 1 -->
            <fieldset>

              <h4>Informacion Personal: <span>Paso 1 - 4</span></h4>
              <div class="form-group">
                <label>Nombre: <span>*</span></label>
                <input type="text" name="Nombre" placeholder="Nombre" class="form-control required">
              </div>
              <div class="form-group">
                <label>Apellido: <span>*</span></label>
                <input type="text" name="Apellido" placeholder="Apellido" class="form-control required">
              </div>
              <div class="form-group">
                <label>Correo: <span>*</span></label>
                <input type="email" name="Correo" placeholder="Correo" class="form-control required">
              </div>
              <div class="form-group">
                <label>Telefono: <span>*</span></label>
                <input type="text" name="Phone" placeholder="Phone" class="form-control required">
              </div>
              <div class="form-wizard-buttons">
                <button type="button" class="btn btn-next">Siguiente</button>
              </div>
            </fieldset>
            <!-- Form Step 1 -->

            <!-- Form Step 2 -->
            <fieldset>
              <h4>Producto : <span>Paso 2 - 4</span></h4>
              <div class="form-group">
                <label>Cantidad: <span>*</span></label>
                <input type="number" name="Cantidad" placeholder="Cantidad" class="form-control required">
              </div>
              <div class="form-group">
                <label>Producto: </label>
                <select name="Producto"class="form-control required">
                  <option>Termometro</option>
                  <option>Mascara</option>
                  <option>.....</option>
                  <option>.....</option>
                  <option>.....</option>
                </select>
              </div>

              <div class="form-wizard-buttons">
                <button type="button" class="btn btn-previous">Anterior</button>
                <button type="button" class="btn btn-next">Siguiente</button>
              </div>
            </fieldset>
            <!-- Form Step 2 -->

            <!-- Form Step 3 -->
            <fieldset>

              <h4>Official Information: <span>Step 3 - 4</span></h4>
              <div class="form-group">
                <label>Direccion: <span>*</span></label>
                <input type="text" name="Direccion" placeholder="Direccion" class="form-control required">
              </div>
              <div class="form-group">
                <label>Ciudad: <span>*</span></label>
                <input type="text" name="Ciudad" placeholder="Ciudad" class="form-control required">
              </div>
              <div class="form-group">
                <label>Codigo Postal: <span>*</span></label>
                <input type="text" name="Codigo_Postal" placeholder="Codigo Postal" class="form-control required">
              </div>
              <div class="form-group">
                <label>Estado: <span>*</span></label>
                <input type="text" name="Estado" placeholder="Estado" class="form-control required">
              </div>
              <div class="form-group">
                <label>Pais: <span>*</span></label>
                <input type="text" name="Pais" placeholder="Pais" class="form-control required">
              </div>
              <br />
              <div class="form-wizard-buttons">
                <button type="button" class="btn btn-previous">Anterior</button>
                <button type="button" class="btn btn-next">Siguiente</button>
              </div>
            </fieldset>
            <!-- Form Step 3 -->

            <!-- Form Step 4 -->
            <fieldset>

              <h4>Comentarios Adicionales: <span>Paso 4 - 4</span></h4>
              <div style="clear:both;"></div>
              <div class="form-group">
                <textarea name="Comentarios" class="form-control required" id="CometariosAdicionales" rows="10" cols="50"> </textarea>
              </div>
              <div class="form-wizard-buttons">
                <button type="button" class="btn btn-previous">Anterior</button>
                <button type="submit" class="btn btn-submit" name="submit" value="submit" >Enviar</button>
              </div>
            </fieldset>
            <!-- Form Step 4 -->

          </form>
          <!-- Form Wizard -->
        </div>
      </div>

    </div>
  </section>
  <!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/js/bootstrap.min.js'></script>
  <script>
  "use strict";
  function scroll_to_class(element_class, removed_height) {
    var scroll_to = $(element_class).offset().top - removed_height;
    if($(window).scrollTop() != scroll_to) {
      $('.form-wizard').stop().animate({scrollTop: scroll_to}, 0);
    }
  }

  function bar_progress(progress_line_object, direction) {
    var number_of_steps = progress_line_object.data('number-of-steps');
    var now_value = progress_line_object.data('now-value');
    var new_value = 0;
    if(direction == 'right') {
      new_value = now_value + ( 100 / number_of_steps );
    }
    else if(direction == 'left') {
      new_value = now_value - ( 100 / number_of_steps );
    }
    progress_line_object.attr('style', 'width: ' + new_value + '%;').data('now-value', new_value);
  }

  jQuery(document).ready(function() {
      /*
          Form
      */
      $('.form-wizard fieldset:first').fadeIn('slow');

      $('.form-wizard .required').on('focus', function() {
        $(this).removeClass('input-error');
      });

      // next step
      $('.form-wizard .btn-next').on('click', function() {
        var parent_fieldset = $(this).parents('fieldset');
        var next_step = true;
        // navigation steps / progress steps
        var current_active_step = $(this).parents('.form-wizard').find('.form-wizard-step.active');
        var progress_line = $(this).parents('.form-wizard').find('.form-wizard-progress-line');

        // fields validation
        parent_fieldset.find('.required').each(function() {
          if( $(this).val() == "" ) {
            $(this).addClass('input-error');
            next_step = false;
          }
          else {
            $(this).removeClass('input-error');
          }
        });
        // fields validation

        if( next_step ) {
          parent_fieldset.fadeOut(400, function() {
            // change icons
            current_active_step.removeClass('active').addClass('activated').next().addClass('active');
            // progress bar
            bar_progress(progress_line, 'right');
            // show next step
            $(this).next().fadeIn();
            // scroll window to beginning of the form
            scroll_to_class( $('.form-wizard'), 20 );
          });
        }

      });

      // previous step
      $('.form-wizard .btn-previous').on('click', function() {
        // navigation steps / progress steps
        var current_active_step = $(this).parents('.form-wizard').find('.form-wizard-step.active');
        var progress_line = $(this).parents('.form-wizard').find('.form-wizard-progress-line');

        $(this).parents('fieldset').fadeOut(400, function() {
          // change icons
          current_active_step.removeClass('active').prev().removeClass('activated').addClass('active');
          // progress bar
          bar_progress(progress_line, 'left');
          // show previous step
          $(this).prev().fadeIn();
          // scroll window to beginning of the form
        scroll_to_class( $('.form-wizard'), 20 );
        });
      });

      // submit
      $('.form-wizard').on('submit', function(e) {
        e.preventDefault();
        let baseUrl = "www.covita.mx/forma.php?"
        // fields validation
        $(this).find('.required').each(function() {

          baseUrl = baseUrl + $(this)[0].name + "=" + $(this).val() + "&"
          if( $(this).val() == "" ) {
            e.preventDefault();
            $(this).addClass('input-error');
          }
          else {
            $(this).removeClass('input-error');
          }
        });

        baseUrl = baseUrl.trim();
        baseUrl = baseUrl.replace(/\s/g, '+');

        $.ajax({
               url : './mailRequest.php',
               type : 'POST',
               data : {"baseUrl": baseUrl},
               success : function (result) {
                  alert("Tu cotizaci贸n est谩 siendo revisada por un ejecutivo de Covita.");
                  window.location.href = "https://www.covita.mx"
               },
               error : function () {
                  alert("Hubo un error en el servidor, por favor intenta mas tarde.");
                  window.location.href = "https://www.covita.mx"
               }

             });
      });
  });


  </script>

</body>

</html>
